<!DOCTYPE html>
<html>
<head>
    <!--객체: 객체 복사-->
    <meta charset='utf-8'>
    <link rel="stylesheet" href="taskCSS_1.css" type="text/css">
</head>

<body>
    <script>
        /*객체는 참조에 의해 할당되고 복사됨. 단순 복사 시 객체 자체가 아닌 메모리상의 주소(참조)가 저장됨. */

        function exam1() {
            let user = {name: 'John'};
            let admin = user;  // 참조값이 복사되고 객체는 복사되지 않는다. 즉, 동일 객체를 참조.
            admin.name = 'Pete';  
            alert(user.name);  // Pete  (변경된 값이 나옴)
        }

        function exam2() {
            let a = {};
            let b = a; // 참조 복사
            alert( a == b ); // true
            alert( a === b ); // true

            let aa = {};
            let bb = {};  // 독립된 객체.
            alert( aa == bb );  // false
        }

        //똑같으면서 독립적인 객체를 만들고 싶다면
        function exam3() {
            let user = {
                name: "John",
                age: 30
            };

            let clone = {};  // 빈 객체

            // 빈 객체에 user 프로퍼티 전부 복사.
            for (let key in user) {
                clone[key] = user[key];
            }

            clone.name = "Pete";  // clone의 데이터를 변경한다.
            alert( user.name );  // John
        }

        //assign 메서드 사용 (얕은 복사)
        function exam4() {
            let user = {name: 'John'};

            let permissions1 = {canView: true};
            let permissions2 = {canEdit: true};
            let permissions3 = {name: 'admin'};  // r같은 이름을 가진 프로퍼티는 덮어쓰기 됨.

            Object.assign(user, permissions1, permissions2, permissions3);
            console.log(user);  // {name: 'admin', canView: true, canEdit: true}
        }

        // 단, 중첩 객체는 복사 불가.(깊은 복사 불가 / 같은 객체를 참조로 고유함.)  lodash 라이브러리의 _.cloneDeep(obj) 등 사용해야.

    </script>

    <a href="#" onclick="exam1();">#1</a>
    <a href="#" onclick="exam2();">#2</a>
    <a href="#" onclick="exam3();">#3</a>
    <a href="#" onclick="exam4();">#4</a>

</body>
</html>